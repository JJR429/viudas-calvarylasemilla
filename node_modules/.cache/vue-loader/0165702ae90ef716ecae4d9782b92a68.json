{"remainingRequest":"/Applications/XAMPP/xamppfiles/htdocs/vue/viudas/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/XAMPP/xamppfiles/htdocs/vue/viudas/src/views/votar/Eligir.vue?vue&type=style&index=0&id=68f12dcb&scoped=true&lang=css&","dependencies":[{"path":"/Applications/XAMPP/xamppfiles/htdocs/vue/viudas/src/views/votar/Eligir.vue","mtime":1610486259246},{"path":"/Applications/XAMPP/xamppfiles/htdocs/vue/viudas/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/vue/viudas/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/vue/viudas/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/vue/viudas/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/vue/viudas/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmljb24tZGV0YWlscyB7CiAgd2lkdGg6IDQwcHg7Cn0KLmljb24tc3RhY2tzIHsKICBoZWlnaHQ6IDUwcHg7Cn0KI3ByaW50LXZvdG8gewogIHZpc2liaWxpdHk6IGhpZGRlbjsKICBoZWlnaHQ6IDBweDsKfQpAbWVkaWEgcHJpbnQgewogICNwcmludC12b3RvLAogICNwcmludC12b3RvICogewogICAgdmlzaWJpbGl0eTogdmlzaWJsZTsKICB9CiAgI3ByaW50LXZvdG8gewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgbGVmdDogMDsKICAgIHRvcDogMDsKICB9Cn0K"},{"version":3,"sources":["Eligir.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Eligir.vue","sourceRoot":"src/views/votar","sourcesContent":["<template>\n  <div class=\"dashboard\">\n    <header\n      class=\"mt-5 mb-10 pb-10 page-header-light bg-white\"\n      v-if=\"!loanding\"\n    >\n      <div v-if=\"typeUser != 'Votante'\">\n        <NotAccess />\n      </div>\n      <div v-else>\n        <div class=\"page-header-content\">\n          <div class=\"container\">\n            <div class=\"row justify-content-center\">\n              <div class=\"col-xl-4 mb-5\">\n                <router-link\n                  :to=\"{\n                    path: '/votar/'\n                  }\"\n                  class=\"btn btn-warning rounded-pill\"\n                  ><i class=\"fas fa-arrow-left\"></i> Regresar</router-link\n                >\n                <hr />\n                <img\n                  class=\"mb-4\"\n                  src=\"https://www.flaticon.es/svg/static/icons/svg/3288/3288367.svg\"\n                  style=\"width: 10rem;\"\n                />\n                <h1 class=\"text-blue font-weight-bold\">\n                  {{ currentUser.nombres }}\n                </h1>\n                <p class=\"page-header-text\">\n                  Emite tu voto con total facilidad.\n                </p>\n\n                <hr />\n                <h2>Organización</h2>\n                <strong>Nombre:</strong> {{ currentUser.organizacion[0].nombres\n                }}<br />\n                <strong>Descripción:</strong>\n                {{ currentUser.organizacion[0].descipcion }}<br />\n                <strong>Dirección:</strong>\n                {{ currentUser.organizacion[0].direccion }}<br />\n                <template v-if=\"currentUser.organizacion[0].estado == 0\">\n                  <strong>Estado:</strong> <b class=\"text-warning\">INACTIVO</b\n                  ><br />\n                </template>\n                <template v-if=\"currentUser.organizacion[0].estado == 1\">\n                  <strong>Estado:</strong> <b class=\"text-warning\">ACTIVO</b\n                  ><br />\n                </template>\n                <template v-if=\"currentUser.organizacion[0].estado == 2\">\n                  <strong>Estado:</strong> <b class=\"text-warning\">SUSPENDIDO</b\n                  ><br />\n                </template>\n                <strong>Fecha Creada:</strong>\n                {{ currentUser.organizacion[0].fechacreada }}\n              </div>\n\n              <div class=\"col-xl-8 col-lg-10 text-center pt-5\">\n                <div class=\"row\">\n                  <div class=\"row text-center mb-4\">\n                    <!-- Header section for buttons {create} -->\n                    <div>\n                      <h1\n                        v-if=\"eleccion.data.length > 0\"\n                        class=\"text-capitalize  text-primary font-weight-bold\"\n                      >\n                        Votaciones para {{ eleccion.data[0].nombres }}\n                      </h1>\n                    </div>\n                  </div>\n                  <div class=\"content\">\n                    <div class=\"mb-2\" v-if=\"!preguntas.loanding\">\n                      <div v-if=\"preguntas.data.length > 0\">\n                        <div v-if=\"verificarVotacion.data.length <= 0\">\n                          <div\n                            class=\"card mb-4\"\n                            v-for=\"(pregunta, index) in preguntas.data\"\n                            v-bind:todo=\"pregunta\"\n                            v-bind:key=\"pregunta.id\"\n                          >\n                            <div class=\"card-header\">\n                              <div\n                                class=\"icon-stack icon-stack bg-blue text-white flex-shrink-0 mr-4\"\n                              >\n                                {{ index + 1 }}\n                              </div>\n                              <div class=\"text-right title-tema\">\n                                <h2 class=\"text-blue font-weight-bold\">\n                                  {{ pregunta.pregunta }}\n                                </h2>\n                              </div>\n                            </div>\n                            <div class=\"card-body\">\n                              <p class=\"text-left\">\n                                {{ pregunta.descripcion }}\n                              </p>\n                              <h3 class=\"text-left text-blue font-weight-bold\">\n                                Opciones\n                              </h3>\n                              <div\n                                v-for=\"(opcion,\n                                opcion_index) in pregunta.opciones\"\n                                v-bind:todo=\"opcion\"\n                                v-bind:key=\"opcion.id\"\n                              >\n                                <div\n                                  v-if=\"marcarOpcion(pregunta.id, opcion.id)\"\n                                  class=\"card bg-green py-2 pl-2 pr-2 mt-2 mb-2\"\n                                >\n                                  <div class=\"d-flex justify-content-between\">\n                                    <div\n                                      class=\"icon-stack icon-stack bg-white-soft font-weight-bold text-black flex-shrink-0\"\n                                    >\n                                      {{ opcion_index + 1 }}\n                                    </div>\n                                    <div\n                                      class=\"title-class-content text-left pl-3 pt-1\"\n                                    >\n                                      <span\n                                        class=\"text-dark font-weight-bold\"\n                                        >{{ opcion.opcion }}</span\n                                      >\n                                    </div>\n                                    <div class=\"d-flex mt-1\">\n                                      <div>\n                                        <button\n                                          class=\"btn btn-md btn-warning ml-2 mr-2 text-white\"\n                                          @click=\"\n                                            escogerOpcion(\n                                              pregunta.id,\n                                              pregunta.pregunta,\n                                              opcion.id,\n                                              opcion.opcion\n                                            )\n                                          \"\n                                        >\n                                          Escogido\n                                        </button>\n                                      </div>\n                                    </div>\n                                  </div>\n                                </div>\n                                <div\n                                  v-else\n                                  class=\"card bg-warning-soft py-2 pl-2 pr-2 mt-2 mb-2\"\n                                >\n                                  <div class=\"d-flex justify-content-between\">\n                                    <div\n                                      class=\"icon-stack icon-stack bg-white-soft font-weight-bold text-black flex-shrink-0\"\n                                    >\n                                      {{ opcion_index + 1 }}\n                                    </div>\n                                    <div\n                                      class=\"title-class-content text-left pl-3 pt-1\"\n                                    >\n                                      <span\n                                        class=\"text-dark font-weight-bold\"\n                                        >{{ opcion.opcion }}</span\n                                      >\n                                    </div>\n                                    <div class=\"d-flex mt-1\">\n                                      <div>\n                                        <button\n                                          class=\"btn btn-md btn-primary ml-2 mr-2 text-white\"\n                                          @click=\"\n                                            escogerOpcion(\n                                              pregunta.id,\n                                              pregunta.pregunta,\n                                              opcion.id,\n                                              opcion.opcion\n                                            )\n                                          \"\n                                        >\n                                          Escoger\n                                        </button>\n                                      </div>\n                                    </div>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                          <div\n                            class=\"alert alert-danger font-weight-bold text-left\"\n                          >\n                            <ul>\n                              <li>\n                                Si no escoges ni una opción, se marcara\n                                automaticamente como \"EN BLANCO\".\n                              </li>\n                              <li>\n                                En caso de que quieras ANULAR tu voto, solo\n                                marca \"NINGUNO\" y se considerará NULO.\n                              </li>\n                            </ul>\n                          </div>\n                          <button\n                            class=\"btn btn-primary btn-lg lift font-weight-bold\"\n                            @click=\"openModalPreviewVoto()\"\n                            ref=\"btnEmitirVoto\"\n                          >\n                            <img\n                              src=\"https://www.flaticon.es/svg/static/icons/svg/1049/1049587.svg\"\n                              width=\"50\"\n                              alt=\"votar\"\n                            />\n                            PREVISUALIZAR Y VOTAR\n                          </button>\n                        </div>\n                        <div v-else class=\" text-left py-5 px-5\">\n                          <h2 class=\"text-warning font-weight-bold mb-3\">\n                            <img\n                              src=\"https://www.flaticon.com/svg/static/icons/svg/1161/1161390.svg\"\n                              width=\"70\"\n                              alt=\"\"\n                            />\n                            Ya Emitiste tu voto.\n                          </h2>\n                          <br />\n                          <hr />\n                          <h1>RESUMEN DE SU VOTO</h1>\n                          <hr />\n                          <h2 v-if=\"eleccion.data.length > 0\">\n                            Elecciones: {{ eleccion.data[0].nombres }}\n                          </h2>\n                          <h2>\n                            Organización:\n                            {{ currentUser.organizacion[0].nombres }}\n                          </h2>\n                          <hr />\n                          <div\n                            class=\"form-row\"\n                            v-for=\"votacion in verificarVotacion.data\"\n                            v-bind:todo=\"votacion\"\n                            v-bind:key=\"votacion.id\"\n                          >\n                            <div class=\"form-group col-md-12 text-left\">\n                              <h3 class=\"text-primary font-weight-bold\">\n                                {{ votacion.pregunta }}\n                              </h3>\n                              <br />\n                              <label\n                                class=\"small text-gray-600 font-weight-bold\"\n                                >{{ votacion.opcion }}</label\n                              >\n                            </div>\n                          </div>\n                          <br />\n                          <hr />\n                          <div>\n                            <span\n                              >Voto emitido en\n                              <strong class=\"text-primary\"\n                                >MayVoto</strong\n                              ></span\n                            ><br />\n                            <span\n                              >Fecha y hora:\n                              {{ verificarVotacion.data[0].fechavotacion }}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                      <div v-else class=\"py-5 px-5\">\n                        <h2 class=\"text-warning font-weight-bold\">\n                          No hay preguntas para esta elección.\n                        </h2>\n                      </div>\n                    </div>\n                    <div class=\"mb-2\" v-else>\n                      <h2>Cargando...</h2>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div id=\"print-voto\">\n              <h1>RESUMEN DEl VOTO</h1>\n              <hr />\n              <h2 v-if=\"eleccion.data.length > 0\">\n                Elecciones: {{ eleccion.data[0].nombres }}\n              </h2>\n              <h2>Organización: {{ currentUser.organizacion[0].nombres }}</h2>\n              <hr />\n              <div\n                class=\"form-row\"\n                v-for=\"voto in voto.data\"\n                v-bind:todo=\"voto\"\n                v-bind:key=\"voto.id\"\n              >\n                <div class=\"form-group col-md-12 text-left\">\n                  <h3 class=\"text-primary font-weight-bold\">\n                    {{ voto.pregunta }}\n                  </h3>\n                  <br />\n                  <label class=\"small text-gray-600 font-weight-bold\">{{\n                    voto.opcion\n                  }}</label>\n                </div>\n              </div>\n              <br />\n              <br />\n              <br />\n              <hr />\n              <div>\n                <span\n                  >Voto emitido en\n                  <strong class=\"text-primary\">MayVoto</strong></span\n                ><br />\n                <span>Fecha y hora: {{ today }} </span>\n              </div>\n            </div>\n\n            <!-- Modal Save Pregunta -->\n            <b-modal id=\"modalPreviewVoto\" centered>\n              <template v-slot:modal-header=\"\">\n                <h3 class=\"modal-title text-blue\">RESUMEN DE SU VOTO</h3>\n              </template>\n              <template v-slot:default=\"\">\n                <h2 class=\"text-primary\" v-if=\"eleccion.data.length > 0\">\n                  {{ eleccion.data[0].nombres }}\n                </h2>\n                <h3>Organización: {{ currentUser.organizacion[0].nombres }}</h3>\n                <hr />\n                <div\n                  class=\"form-row\"\n                  v-for=\"voto in voto.data\"\n                  v-bind:todo=\"voto\"\n                  v-bind:key=\"voto.id\"\n                >\n                  <div class=\"form-group col-md-12 text-left\">\n                    <label class=\"text-dark font-weight-bold\">{{\n                      voto.pregunta\n                    }}</label\n                    ><br />\n                    <label class=\"small text-gray-600 font-weight-bold\">{{\n                      voto.opcion\n                    }}</label>\n                  </div>\n                </div>\n                <hr />\n                <button class=\"btn btn-dark btn-sm mr-2\" @click=\"printVoto()\">\n                  <i class=\"fas fa-print\"></i> Imprimir\n                </button>\n                <button class=\"btn btn-danger btn-sm mr-2\" @click=\"printVoto()\">\n                  <i class=\"fas fa-file-pdf\"></i> Descargar PDF\n                </button>\n                <div class=\"error-modal\" v-if=\"emitirVoto.error\">\n                  <span class=\"text-red\"> {{ emitirVoto.error_message }}</span>\n                </div>\n              </template>\n\n              <template v-slot:modal-footer=\"{ ok, cancel }\">\n                <b-button\n                  size=\"md\"\n                  class=\"btn btn-white rounded-pill\"\n                  @click=\"cancel()\"\n                >\n                  Cancelar\n                </b-button>\n                <b-button\n                  size=\"md\"\n                  class=\"btn btn-blue rounded-pill\"\n                  @click=\"votar\"\n                  ref=\"btnVotar\"\n                >\n                  <img\n                    src=\"https://www.flaticon.es/svg/static/icons/svg/1533/1533913.svg\"\n                    width=\"30\"\n                    alt=\"\"\n                  />\n                  EMITIR VOTO\n                </b-button>\n              </template>\n            </b-modal>\n            <!-- End modal -->\n\n            <!-- Modal Delete Opcion -->\n            <b-modal id=\"modalMensaje\" centered>\n              <template v-slot:modal-header=\"\">\n                <h3 class=\"modal-title\" v-if=\"emitirVoto.n_error == 0\">\n                  Cargando...\n                </h3>\n                <h3 class=\"modal-title\" v-else>Mensaje</h3>\n              </template>\n              <template v-slot:default=\"\">\n                <i\n                  v-if=\"emitirVoto.n_error == 0\"\n                  class=\"fas fa-circle-notch fa-spin fa-3x\"\n                ></i>\n                <h2 v-else class=\"text-green \">\n                  Su voto fue emitido exitósamente!\n                </h2>\n                <hr />\n                <button class=\"btn btn-dark btn-sm mr-2\" @click=\"printVoto()\">\n                  <i class=\"fas fa-print\"></i> Imprimir\n                </button>\n                <button class=\"btn btn-danger btn-sm mr-2\" @click=\"printVoto()\">\n                  <i class=\"fas fa-file-pdf\"></i> Descargar PDF\n                </button>\n              </template>\n              <template v-slot:modal-footer=\"{ ok, cancel }\">\n                <b-button\n                  size=\"md\"\n                  class=\"btn btn-white rounded-pill\"\n                  @click=\"cancel()\"\n                >\n                  Cerrar\n                </b-button>\n                <b-button\n                  size=\"md\"\n                  class=\"btn btn-red rounded-pill\"\n                  @click=\"GoToBack()\"\n                  ref=\"btnOkMensaje\"\n                >\n                  OK\n                </b-button>\n              </template>\n            </b-modal>\n            <!-- End modal -->\n          </div>\n        </div>\n      </div>\n    </header>\n\n    <div class=\"dash\" v-else>\n      <p>Loanding...</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport NotAccess from \"@/components/NotAccess.vue\";\n\nimport axios from \"axios\";\n\nexport default {\n  components: {\n    NotAccess\n  },\n  data() {\n    return {\n      loanding: true,\n      today: \"\",\n      eleccion: {\n        data: [],\n        loanding: true\n      },\n      preguntas: {\n        data: [],\n        loanding: true\n      },\n      voto: {\n        data: []\n      },\n      emitirVoto: {\n        loanding: true,\n        n_error: 0,\n        error: false,\n        error_message: \"\"\n      },\n      verificarVotacion: {\n        data: [],\n        error: false,\n        error_message: \"\"\n      },\n      host: this.$store.getters.getHost\n    };\n  },\n  created() {\n    this.getEleccion();\n    this.Get();\n  },\n  computed: {\n    // getter\n    typeUser() {\n      return this.$store.getters.getTypeUser;\n    },\n    currentUser() {\n      // console.log('Current User Dash: '+this.$store.getters.getCurrentUserData)\n      return this.$store.getters.getCurrentUserData;\n    }\n  },\n  mounted() {\n    // getter\n    // this.currentUser = this.$store.getters.getCurrentUserData\n    this.loanding = false;\n  },\n  methods: {\n    getEleccion: async function() {\n      this.eleccion.loanding = true;\n      let _ideleccion = this.$route.params.id;\n      const response = await fetch(\n        this.host +\n          \"/mayvoto/api/actions/elecciones.byid.php?\" +\n          \"id=\" +\n          _ideleccion +\n          \"\"\n      );\n      const data = await response.json();\n      this.eleccion.data = await data;\n      this.eleccion.loanding = false;\n    },\n    Get: async function() {\n      this.preguntas.loanding = true;\n      let _ideleccion = this.$route.params.id;\n      let _idorganizacion = this.$store.getters.getCurrentUserData\n        .organizacion[0].id;\n      const response = await fetch(\n        this.host +\n          \"/mayvoto/api/actions/preguntas.data.json.php?ideleccion=\" +\n          _ideleccion +\n          \"&idorganizacion=\" +\n          _idorganizacion +\n          \"\"\n      );\n      const data = await response.json();\n      if (this.getVotacionHecha()) {\n        this.verificarVotacion.error = true;\n      }\n      this.preguntas.data = await data;\n      this.preguntas.loanding = false;\n      for (let i = 0; i < this.preguntas.data.length; i++) {\n        let _escogido = {\n          idpregunta: this.preguntas.data[i].id,\n          pregunta: this.preguntas.data[i].pregunta,\n          idopcion: 0,\n          opcion: \"EN BLANCO\"\n        };\n        this.voto.data.push(_escogido);\n      }\n    },\n    getVotacionHecha: async function() {\n      let _dni = this.$store.getters.getCurrentUserData.dni;\n      let _ideleccion = this.$route.params.id;\n      let _idorganizacion = this.$store.getters.getCurrentUserData\n        .organizacion[0].id;\n      const response = await fetch(\n        this.host +\n          \"/mayvoto/api/actions/votaciones.byuser.php?dni=\" +\n          _dni +\n          \"&idorganizacion=\" +\n          _idorganizacion +\n          \"&ideleccion=\" +\n          _ideleccion\n      );\n      const data = await response.json();\n      this.verificarVotacion.data = await data;\n      if (data.length > 0) {\n        return true;\n      }\n      return false;\n    },\n    escogerOpcion: function(_idpregunta, _pregunta, _idopcion, _opcion) {\n      let _index = this.voto.data.findIndex(\n        pregunta => pregunta.idpregunta === _idpregunta\n      );\n      this.voto.data[_index].idopcion = _idopcion;\n      this.voto.data[_index].opcion = _opcion;\n    },\n    marcarOpcion: function(_idpregunta, _idopcion) {\n      let found = 0;\n      for (let i = 0; i < this.voto.data.length; i++) {\n        if (\n          this.voto.data[i].idpregunta == _idpregunta &&\n          this.voto.data[i].idopcion == _idopcion\n        ) {\n          found++;\n        }\n      }\n      if (found > 0) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    votar: function() {\n      this.emitirVoto.loanding = true;\n      this.n_error = 0;\n      this.$root.$emit(\"bv::hide::modal\", \"modalPreviewVoto\", \"#btnVotar\");\n      this.openModalMensaje();\n      let _data = new FormData();\n      _data.set(\"idusuario\", this.currentUser.id);\n      _data.set(\"dni\", this.currentUser.dni);\n      _data.set(\"idorganizacion\", this.currentUser.organizacion[0].id);\n      _data.set(\"organizacion\", this.currentUser.organizacion[0].nombres);\n      _data.set(\"ideleccion\", this.eleccion.data[0].id);\n      _data.set(\"eleccion\", this.eleccion.data[0].nombres);\n      _data.set(\"voto\", JSON.stringify(this.voto.data));\n      _data.set(\"os\", \"NA\");\n      _data.set(\"browser\", \"NA\");\n      axios({\n        method: \"post\",\n        url: this.host + \"/mayvoto/api/actions/votar.save.php\",\n        data: _data,\n        headers: {\n          \"content-type\": \"application/x-www-form-urlencoded\"\n        }\n      })\n        .then(response => {\n          console.log(\"Resultados de la votación:\");\n          console.log(response.data);\n          //handle response\n          if (!response.data.error) {\n            // Guarda el curso, pero tenemos que poner al Grado.\n            this.emitirVoto.n_error = 1;\n            this.emitirVoto.error = false;\n            this.emitirVoto.error_message = \"Su voto se emitio con éxito.\";\n          } else {\n            this.emitirVoto.n_error = 2;\n            this.emitirVoto.error = true;\n            console.log(\"Error al emtir el voto\");\n          }\n        })\n        .catch(response => {\n          //handle error\n          this.emitirVoto.n_error = 3;\n          this.emitirVoto.error = true;\n          console.log(response);\n        });\n    },\n    openModalPreviewVoto: function() {\n      this.$root.$emit(\"bv::show::modal\", \"modalPreviewVoto\", \"#btnVotar\");\n      this.getCurrentDate();\n    },\n    openModalMensaje: function() {\n      this.$root.$emit(\"bv::show::modal\", \"modalMensaje\", \"#btnOkMensaje\");\n      this.getCurrentDate();\n    },\n    printVoto: function() {\n      // Get HTML to print from element\n      const prtHtml = document.getElementById(\"print-voto\").innerHTML;\n\n      // Get all stylesheets HTML\n      let stylesHtml = \"\";\n      for (const node of [\n        ...document.querySelectorAll('link[rel=\"stylesheet\"], style')\n      ]) {\n        stylesHtml += node.outerHTML;\n      }\n\n      // Open the print window\n      const WinPrint = window.open(\n        \"\",\n        \"\",\n        \"left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0\"\n      );\n\n      WinPrint.document.write(`<!DOCTYPE html>\n      <html>\n        <head>\n          ${stylesHtml}\n        </head>\n        <body>\n          ${prtHtml}\n        </body>\n      </html>`);\n\n      WinPrint.document.close();\n      WinPrint.focus();\n      WinPrint.print();\n      WinPrint.close();\n    },\n    getCurrentDate: function() {\n      var today = new Date();\n      // var dd = String(today.getDate()).padStart(2, '0');\n      // var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n      // var yyyy = today.getFullYear();\n\n      // today = mm + '/' + dd + '/' + yyyy;\n      this.today = today;\n    },\n    GoToBack: function() {\n      this.$root.$emit(\"bv::hide::modal\", \"modalMensaje\", \"#btnOkMensaje\");\n    }\n  }\n};\n</script>\n<style scoped>\n.icon-details {\n  width: 40px;\n}\n.icon-stacks {\n  height: 50px;\n}\n#print-voto {\n  visibility: hidden;\n  height: 0px;\n}\n@media print {\n  #print-voto,\n  #print-voto * {\n    visibility: visible;\n  }\n  #print-voto {\n    position: absolute;\n    left: 0;\n    top: 0;\n  }\n}\n</style>\n"]}]}