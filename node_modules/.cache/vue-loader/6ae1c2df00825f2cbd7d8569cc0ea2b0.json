{"remainingRequest":"/Applications/XAMPP/xamppfiles/htdocs/vue/elecciones/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/XAMPP/xamppfiles/htdocs/vue/elecciones/src/views/supervisores/Votantes.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Applications/XAMPP/xamppfiles/htdocs/vue/elecciones/src/views/supervisores/Votantes.vue","mtime":1602341036278},{"path":"/Applications/XAMPP/xamppfiles/htdocs/vue/elecciones/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/vue/elecciones/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/vue/elecciones/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/vue/elecciones/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOb3RBY2Nlc3MgZnJvbSAiQC9jb21wb25lbnRzL05vdEFjY2Vzcy52dWUiOwoKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIE5vdEFjY2VzcwogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYW5kaW5nOiB0cnVlLAogICAgICB2b3RhbnRlczogW10sCiAgICAgIGhvc3Q6dGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRIb3N0CiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuR2V0KCk7CiAgfSwKICBjb21wdXRlZDogewogICAgLy8gZ2V0dGVyCiAgICB0eXBlVXNlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VHlwZVVzZXI7CiAgICB9LAogICAgY3VycmVudFVzZXIoKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdDdXJyZW50IFVzZXIgRGFzaDogJyt0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldEN1cnJlbnRVc2VyRGF0YSkKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q3VycmVudFVzZXJEYXRhOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIC8vIGdldHRlcgogICAgLy8gdGhpcy5jdXJyZW50VXNlciA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q3VycmVudFVzZXJEYXRhCiAgICB0aGlzLmxvYW5kaW5nID0gZmFsc2U7CiAgfSwKICBtZXRob2RzOiB7CiAgICAgR2V0OiBhc3luYyBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5sb2FuZGluZyA9IHRydWU7CiAgICAgIGxldCBfb3JnYW5pemFjaW9uID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDdXJyZW50VXNlckRhdGEub3JnYW5pemFjaW9uWzBdLmlkOwogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKAogICAgICAgIHRoaXMuaG9zdCsiL21heXZvdG8vYXBpL2FjdGlvbnMvdm90YW50ZXMuZGF0YS5qc29uLnBocD8iKyJpZG9yZ2FuaXphY2lvbj0iK19vcmdhbml6YWNpb24rIiIpOwogICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgICB0aGlzLnZvdGFudGVzID0gYXdhaXQgZGF0YTsKICAgICAgdGhpcy5sb2FuZGluZyA9IGZhbHNlOwogICAgfSwKICAgIHVwZGF0ZUVzdGFkbzogYXN5bmMgZnVuY3Rpb24oX2luZGV4LCBfZXN0YWRvKSB7CiAgICAgIGxldCBfZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBfZGF0YS5zZXQoImlkIiwgdGhpcy5nZXRWb3RhbnRlSWQoX2luZGV4KSk7CiAgICAgIF9kYXRhLnNldCgiZXN0YWRvIiwgX2VzdGFkbyk7CiAgICAgIGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICB1cmw6CiAgICAgICAgICB0aGlzLmhvc3QrIi9tYXl2b3RvL2FwaS9hY3Rpb25zL3ZvdGFudGVzLnVwZGF0ZS5lc3RhZG8ucGhwIiwKICAgICAgICBkYXRhOiBfZGF0YSwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIKICAgICAgICB9CiAgICAgIH0pCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgaWYgKCFyZXNwb25zZS5kYXRhLmVycm9yKSB7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdVZGF0ZWQhJykKICAgICAgICAgICAgdGhpcy5HZXQoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBvbiBVcGRhdGUgRXN0YWRvISIpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKHJlc3BvbnNlID0+IHsKICAgICAgICAgIC8vaGFuZGxlIGVycm9yCiAgICAgICAgICB0aGlzLmVycm9yID0gdHJ1ZTsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBnZXRWb3RhbnRlSWQ6IGZ1bmN0aW9uKF9pbmRleCl7CiAgICAgICAgcmV0dXJuIHRoaXMudm90YW50ZXNbX2luZGV4XS5pZDsKICAgIH0sCiAgICB2ZXJpZmljYXJFc3RhZG86IGZ1bmN0aW9uKF9pbmRleCl7CiAgICAgICAgcmV0dXJuIHRoaXMudm90YW50ZXNbX2luZGV4XS5lc3RhZG87CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Votantes.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0LA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Votantes.vue","sourceRoot":"src/views/supervisores","sourcesContent":["<template>\n  <div class=\"dashboard\">\n    <header class=\"mt-5 mb-10 pb-10 page-header-light bg-white\" v-if=\"!loanding\">\n      <div v-if=\"typeUser != 'Supervisor' && typeUser != 'Organizador'\">\n        <NotAccess />\n      </div>\n      <div v-else>\n        <div class=\"page-header-content\">\n          <div class=\"container\">\n            <div class=\"row justify-content-center\">\n              <div class=\"col-xl-4 mb-5\"><router-link\n                      :to=\"{\n                        path:\n                          '/perfil/'\n                      }\"\n                      class=\"btn btn-warning rounded-pill\"\n                      ><i class=\"fas fa-arrow-left\"></i> Regresar</router-link\n                    >\n                    <hr />\n                <img\n                  class=\"mb-4\"\n                  src=\"https://www.flaticon.es/svg/static/icons/svg/3288/3288367.svg\"\n                  style=\"width: 10rem;\"\n                />\n                <h1 class=\"text-blue font-weight-bold\">\n                  {{ currentUser.nombres }}\n                </h1>\n                <h2 class=\"text-danger font-weight-bold\">\n                  {{ typeUser }}\n                </h2>\n                <p class=\"page-header-text\">\n                  Lista de Votanes de tu organización.\n                </p>\n\n                  <hr>\n                  <h2>Organización</h2>\n                  <strong>Nombre:</strong> {{currentUser.organizacion[0].nombres}}<br>\n                  <strong>Descripción:</strong> {{currentUser.organizacion[0].descipcion}}<br>\n                  <strong>Dirección:</strong> {{currentUser.organizacion[0].direccion}}<br>\n                  <template v-if=\"currentUser.organizacion[0].estado == 0\">\n                    <strong>Estado:</strong> <b class=\"text-warning\">INACTIVO</b><br>\n                  </template>\n                  <template v-if=\"currentUser.organizacion[0].estado == 1\">\n                    <strong>Estado:</strong> <b class=\"text-warning\">ACTIVO</b><br>\n                  </template>\n                  <template v-if=\"currentUser.organizacion[0].estado == 2\">\n                    <strong>Estado:</strong> <b class=\"text-warning\">SUSPENDIDO</b><br>\n                  </template>\n                  <strong>Fecha Creada:</strong> {{currentUser.organizacion[0].fechacreada}}\n\n              </div>\n\n              <div class=\"col-xl-8 col-lg-10 text-center pt-5\">\n                <div class=\"row\">\n                  <div class=\"col-md-12\">\n                    <div\n                      class=\"card text-decoration-none mb-4\" >\n                      <div class=\"card-header\">\n                          <h3 class=\"text-left text-blue font-weight-bold\">\n                              Votantes\n                            </h3>\n                      </div>\n                      <div class=\"card-body\" v-if=\"!loanding\">\n                        <div v-if=\"votantes.length>0\">\n                            <div\n                              v-for=\"(vontante,index) in votantes\"\n                              v-bind:todo=\"vontante\"\n                              v-bind:key=\"vontante.id\"\n                            >\n                              <div\n                                class=\"card py-2 pl-2 pr-2 mt-2 mb-2\"\n                              >\n                                <div class=\"d-flex text-left justify-content-between\">\n                                  <div\n                                    class=\"icon-stack icon-stack bg-white-soft font-weight-bold text-black flex-shrink-0\"\n                                  >\n                                    {{ index + 1 }}\n                                  </div>\n                                  <div\n                                    class=\"title-class-content text-left pl-3 pt-1\"\n                                  >\n                                    <span class=\"text-dark font-weight-bold\">{{\n                                      vontante.dni\n                                    }}</span> | \n                                    <span class=\"text-dark font-weight-bold\">{{\n                                      vontante.nombres\n                                    }}</span> | \n                                    <span class=\"text-dark font-weight-bold\">{{\n                                      vontante.apellidos\n                                    }}</span> | \n                                    <span v-if=\"verificarEstado(index) == 0\" class=\"text-warning font-weight-bold\">\n                                    INACTIVO </span>\n                                    <span v-if=\"verificarEstado(index) == 1\" class=\"text-green font-weight-bold\">\n                                    ACTIVO </span>\n                                    <span v-if=\"verificarEstado(index) == 2\" class=\"text-red font-weight-bold\">\n                                    BLOQUEADO</span>\n                                  </div>\n                                  <div class=\"d-flex mt-1\" v-if=\"typeUser == 'Organizador'\">\n                                    <div v-if=\"verificarEstado(index) == 0\">\n                                      <button\n                                        class=\"btn btn-xs btn-green ml-2 mr-2 text-white\"\n                                        @click=\"updateEstado(index,1)\"\n                                      >\n                                        Activar\n                                      </button>\n                                    </div>\n                                    <div v-if=\"verificarEstado(index) == 0\">\n                                      <button\n                                        class=\"btn btn-xs btn-red ml-2 mr-2 text-white\"\n                                        @click=\"updateEstado(index,2)\"\n                                      >\n                                        Bloquear\n                                      </button>\n                                    </div>\n                                    <div v-if=\"verificarEstado(index) == 1\">\n                                      <button\n                                        class=\"btn btn-xs btn-yellow ml-2 mr-2 text-white\"\n                                        @click=\"updateEstado(index,0)\"\n                                      >\n                                        Inactivar\n                                      </button>\n                                    </div>\n                                    <div v-if=\"verificarEstado(index) == 1\">\n                                      <button\n                                        class=\"btn btn-xs btn-red ml-2 mr-2 text-white\"\n                                        @click=\"updateEstado(index,2)\"\n                                      >\n                                        Bloquear\n                                      </button>\n                                    </div>\n\n                                    <div v-if=\"verificarEstado(index) == 2\">\n                                      <button\n                                        class=\"btn btn-xs btn-yellow ml-2 mr-2 text-white\"\n                                        @click=\"updateEstado(index,0)\"\n                                      >\n                                        Inactivar\n                                      </button>\n                                    </div>\n                                    <div v-if=\"verificarEstado(index) == 2\">\n                                      <button\n                                        class=\"btn btn-xs btn-green ml-2 mr-2 text-white\"\n                                        @click=\"updateEstado(index,1)\"\n                                      >\n                                        Activar\n                                      </button>\n                                    </div>\n                                  </div>\n                                  <div v-else>\n\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                            <div class=\"text-left mt-3\">\n                            <span class=\"bg-yellow ml-2 text-white\"> INACTIVO </span> : Este usuario no podrá votar, pero podra ver elecciones y sus datos.<br>\n                            <span class=\"bg-green ml-2 text-white\"> ACTIVO </span> : Este usuario podrá votar, y ver resultados.<br>\n                            <span class=\"bg-red ml-2 text-white\"> BLOQUEADO </span> : Este usuario no podrá acceder al sistema.\n                            </div>\n\n                        </div>\n                        <div v-else>\n                            <h3 class=\"text-warning\">No hay Votantes en tu organización</h3>\n                        </div>\n                      </div>\n                      <div v-else>\n                            <h2 class=\"text-warning\">Cargando...</h2>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </header>\n\n    <div class=\"dash\" v-else>\n      <p>Loanding...</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport NotAccess from \"@/components/NotAccess.vue\";\n\nimport axios from \"axios\";\nexport default {\n  components: {\n    NotAccess\n  },\n  data() {\n    return {\n      loanding: true,\n      votantes: [],\n      host:this.$store.getters.getHost\n    };\n  },\n  created() {\n    this.Get();\n  },\n  computed: {\n    // getter\n    typeUser() {\n      return this.$store.getters.getTypeUser;\n    },\n    currentUser() {\n      // console.log('Current User Dash: '+this.$store.getters.getCurrentUserData)\n      return this.$store.getters.getCurrentUserData;\n    }\n  },\n  mounted() {\n    // getter\n    // this.currentUser = this.$store.getters.getCurrentUserData\n    this.loanding = false;\n  },\n  methods: {\n     Get: async function() {\n      this.loanding = true;\n      let _organizacion = this.$store.getters.getCurrentUserData.organizacion[0].id;\n      const response = await fetch(\n        this.host+\"/mayvoto/api/actions/votantes.data.json.php?\"+\"idorganizacion=\"+_organizacion+\"\");\n      const data = await response.json();\n      this.votantes = await data;\n      this.loanding = false;\n    },\n    updateEstado: async function(_index, _estado) {\n      let _data = new FormData();\n      _data.set(\"id\", this.getVotanteId(_index));\n      _data.set(\"estado\", _estado);\n      axios({\n        method: \"post\",\n        url:\n          this.host+\"/mayvoto/api/actions/votantes.update.estado.php\",\n        data: _data,\n        headers: {\n          \"content-type\": \"application/x-www-form-urlencoded\"\n        }\n      })\n        .then(response => {\n          if (!response.data.error) {\n            // console.log('Udated!')\n            this.Get();\n          } else {\n            console.log(\"Error on Update Estado!\");\n          }\n        })\n        .catch(response => {\n          //handle error\n          this.error = true;\n          console.log(response);\n        });\n    },\n    getVotanteId: function(_index){\n        return this.votantes[_index].id;\n    },\n    verificarEstado: function(_index){\n        return this.votantes[_index].estado;\n    }\n  }\n};\n</script>\n<style scoped>\n.icon-details {\n  width: 40px;\n}\n.icon-stacks {\n  height: 50px;\n}\n</style>\n"]}]}