{"remainingRequest":"/Applications/XAMPP/xamppfiles/htdocs/vue/elecciones/node_modules/babel-loader/lib/index.js!/Applications/XAMPP/xamppfiles/htdocs/vue/elecciones/node_modules/eslint-loader/index.js??ref--13-0!/Applications/XAMPP/xamppfiles/htdocs/vue/elecciones/src/router/auth.js","dependencies":[{"path":"/Applications/XAMPP/xamppfiles/htdocs/vue/elecciones/src/router/auth.js","mtime":1602184590514},{"path":"/Applications/XAMPP/xamppfiles/htdocs/vue/elecciones/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/vue/elecciones/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/vue/elecciones/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvQXBwbGljYXRpb25zL1hBTVBQL3hhbXBwZmlsZXMvaHRkb2NzL3Z1ZS9lbGVjY2lvbmVzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8gLyogZ2xvYmFscyBsb2NhbFN0b3JhZ2UgKi8KaW1wb3J0IHN0b3JlIGZyb20gIkAvc3RvcmUvaW5kZXgiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbG9naW5BZG1pbjogZnVuY3Rpb24gbG9naW5BZG1pbih1c2VybmFtZSwgcGFzcywgY2IpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgY2IgPSBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdOwoKICAgIGlmIChsb2NhbFN0b3JhZ2UudG9rZW4pIHsKICAgICAgaWYgKGNiKSBjYih0cnVlKTsKICAgICAgdGhpcy5vbkNoYW5nZSh0cnVlKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZlcmlmeUFkbWluKHVzZXJuYW1lLCBwYXNzLCBmdW5jdGlvbiAocmVzKSB7CiAgICAgIGlmIChyZXMuYXV0aGVudGljYXRlZCkgewogICAgICAgIGxvY2FsU3RvcmFnZS50b2tlbiA9IHJlcy50b2tlbjsKICAgICAgICBpZiAoY2IpIGNiKHRydWUpOwoKICAgICAgICBfdGhpcy5vbkNoYW5nZSh0cnVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoY2IpIGNiKGZhbHNlKTsKCiAgICAgICAgX3RoaXMub25DaGFuZ2UoZmFsc2UpOwogICAgICB9CiAgICB9KTsKICB9LAogIGxvZ2luVXNlcjogZnVuY3Rpb24gbG9naW5Vc2VyKHVzZXJuYW1lLCBwYXNzLCBjYikgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgY2IgPSBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdOwoKICAgIGlmIChsb2NhbFN0b3JhZ2UudG9rZW4pIHsKICAgICAgaWYgKGNiKSBjYih0cnVlKTsKICAgICAgdGhpcy5vbkNoYW5nZSh0cnVlKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZlcmlmeVVzZXIodXNlcm5hbWUsIHBhc3MsIGZ1bmN0aW9uIChyZXMpIHsKICAgICAgaWYgKHJlcy5hdXRoZW50aWNhdGVkKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnRva2VuID0gcmVzLnRva2VuOwogICAgICAgIGlmIChjYikgY2IodHJ1ZSk7CgogICAgICAgIF90aGlzMi5vbkNoYW5nZSh0cnVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoY2IpIGNiKGZhbHNlKTsKCiAgICAgICAgX3RoaXMyLm9uQ2hhbmdlKGZhbHNlKTsKICAgICAgfQogICAgfSk7CiAgfSwKICBnZXRUb2tlbjogZnVuY3Rpb24gZ2V0VG9rZW4oKSB7CiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnRva2VuOwogIH0sCiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoY2IpIHsKICAgIHN0b3JlLmRpc3BhdGNoKCJkZWxldGVDdXJyZW50VXNlciIpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImN1cnJlbnRVc2VyIik7CiAgICBkZWxldGUgbG9jYWxTdG9yYWdlLnRva2VuOwogICAgaWYgKGNiKSBjYigpOwogICAgdGhpcy5vbkNoYW5nZShmYWxzZSk7CiAgfSwKICBsb2dnZWRJbjogZnVuY3Rpb24gbG9nZ2VkSW4oKSB7CiAgICBpZiAobG9jYWxTdG9yYWdlLnRva2VuKSB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCJsb2FkTG9jYWxTdG9yYWdlIik7CiAgICB9CgogICAgcmV0dXJuICEhbG9jYWxTdG9yYWdlLnRva2VuOwogIH0sCiAgdHlwZUxvZ2luOiBmdW5jdGlvbiB0eXBlTG9naW4oKSB7CiAgICB2YXIgX3R5cGV1c2VyID0gbnVsbDsKCiAgICB0cnkgewogICAgICBfdHlwZXVzZXIgPSBzdG9yZS5nZXR0ZXJzLmdldFR5cGVVc2VyOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgX3R5cGV1c2VyID0gbnVsbDsKICAgIH0KCiAgICByZXR1cm4gX3R5cGV1c2VyOwogIH0sCiAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKCkge30KfTsKCmZ1bmN0aW9uIHZlcmlmeUFkbWluKF94LCBfeDIsIF94MykgewogIHJldHVybiBfdmVyaWZ5QWRtaW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3ZlcmlmeUFkbWluKCkgewogIF92ZXJpZnlBZG1pbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh1c2VybmFtZSwgcGFzcywgY2IpIHsKICAgIHZhciBfZGF0YTsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9kYXRhID0gbmV3IEZvcm1EYXRhKCk7CgogICAgICAgICAgICBfZGF0YS5zZXQoInVzZXJuYW1lIiwgdXNlcm5hbWUpOwoKICAgICAgICAgICAgX2RhdGEuc2V0KCJwYXNzd29yZCIsIHBhc3MpOyAvLyBjb25zb2xlLmxvZyhfdXNlci51c2VybmFtZSArJyB8ICcrIF91c2VyLnBhc3N3b3JkKQoKCiAgICAgICAgICAgIGF4aW9zKHsKICAgICAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgICAgICB1cmw6ICJodHRwOi8vbG9jYWxob3N0L21heXZvdG8vYXBpL2FjdGlvbnMvYWRtaW4ubG9naW4ucGhwIiwKICAgICAgICAgICAgICBkYXRhOiBfZGF0YSwKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgLy9oYW5kbGUgc3VjY2VzcwogICAgICAgICAgICAgIGlmICghcmVzcG9uc2UuZGF0YS5lcnJvcikgewogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5tZXNzYWdlKQogICAgICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goInNldEN1cnJlbnRVc2VyIiwgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YS5kYXRhKSk7CiAgICAgICAgICAgICAgICBjYih7CiAgICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgIHRva2VuOiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNykKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLm1lc3NhZ2UpCiAgICAgICAgICAgICAgICBjYih7CiAgICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0ZWQ6IGZhbHNlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIC8vaGFuZGxlIGVycm9yCiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgIGNiKHsKICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0ZWQ6IGZhbHNlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CiAgcmV0dXJuIF92ZXJpZnlBZG1pbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiB2ZXJpZnlVc2VyKF94NCwgX3g1LCBfeDYpIHsKICByZXR1cm4gX3ZlcmlmeVVzZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3ZlcmlmeVVzZXIoKSB7CiAgX3ZlcmlmeVVzZXIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHVzZXJuYW1lLCBwYXNzLCBjYikgewogICAgdmFyIF9kYXRhOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9kYXRhID0gbmV3IEZvcm1EYXRhKCk7CgogICAgICAgICAgICBfZGF0YS5zZXQoInVzZXJuYW1lIiwgdXNlcm5hbWUpOwoKICAgICAgICAgICAgX2RhdGEuc2V0KCJwYXNzd29yZCIsIHBhc3MpOyAvLyBjb25zb2xlLmxvZyhfdXNlci51c2VybmFtZSArJyB8ICcrIF91c2VyLnBhc3N3b3JkKQoKCiAgICAgICAgICAgIGF4aW9zKHsKICAgICAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgICAgICB1cmw6ICJodHRwOi8vbG9jYWxob3N0L21heXZvdG8vYXBpL2FjdGlvbnMvdXNlci5sb2dpbi5waHAiLAogICAgICAgICAgICAgIGRhdGE6IF9kYXRhLAogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAvL2hhbmRsZSBzdWNjZXNzCiAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5kYXRhLmVycm9yKSB7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLm1lc3NhZ2UpCiAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgic2V0Q3VycmVudFVzZXIiLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLmRhdGEpKTsKICAgICAgICAgICAgICAgIGNiKHsKICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgdG9rZW46IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEubWVzc2FnZSkKICAgICAgICAgICAgICAgIGNiKHsKICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRlZDogZmFsc2UKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgLy9oYW5kbGUgZXJyb3IKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICAgICAgY2IoewogICAgICAgICAgICAgICAgYXV0aGVudGljYXRlZDogZmFsc2UKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMik7CiAgfSkpOwogIHJldHVybiBfdmVyaWZ5VXNlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9"},{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/vue/elecciones/src/router/auth.js"],"names":["store","axios","loginAdmin","username","pass","cb","arguments","length","localStorage","token","onChange","verifyAdmin","res","authenticated","loginUser","verifyUser","getToken","logout","dispatch","removeItem","loggedIn","typeLogin","_typeuser","getters","getTypeUser","error","_data","FormData","set","method","url","data","headers","then","response","JSON","stringify","Math","random","toString","substring","catch","console","log"],"mappings":"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","sourcesContent":["// /* globals localStorage */\nimport store from \"@/store/index\";\nimport axios from \"axios\";\n\nexport default {\n  loginAdmin(username, pass, cb) {\n    cb = arguments[arguments.length - 1];\n    if (localStorage.token) {\n      if (cb) cb(true);\n      this.onChange(true);\n      return;\n    }\n    verifyAdmin(username, pass, res => {\n      if (res.authenticated) {\n        localStorage.token = res.token;\n        if (cb) cb(true);\n        this.onChange(true);\n      } else {\n        if (cb) cb(false);\n        this.onChange(false);\n      }\n    });\n  },\n\n  loginUser(username, pass, cb) {\n    cb = arguments[arguments.length - 1];\n    if (localStorage.token) {\n      if (cb) cb(true);\n      this.onChange(true);\n      return;\n    }\n    verifyUser(username, pass, res => {\n      if (res.authenticated) {\n        localStorage.token = res.token;\n        if (cb) cb(true);\n        this.onChange(true);\n      } else {\n        if (cb) cb(false);\n        this.onChange(false);\n      }\n    });\n  },\n\n  getToken() {\n    return localStorage.token;\n  },\n\n  logout(cb) {\n    store.dispatch(\"deleteCurrentUser\");\n    localStorage.removeItem(\"currentUser\");\n    delete localStorage.token;\n    if (cb) cb();\n    this.onChange(false);\n  },\n\n  loggedIn() {\n    if (localStorage.token) {\n      store.dispatch(\"loadLocalStorage\");\n    }\n    return !!localStorage.token;\n  },\n\n  typeLogin() {\n    let _typeuser = null;\n    try {\n      _typeuser = store.getters.getTypeUser;\n    } catch (error) {\n      _typeuser = null;\n    }\n    return _typeuser;\n  },\n\n  onChange() {}\n};\n\nasync function verifyAdmin(username, pass, cb) {\n  let _data = new FormData();\n  _data.set(\"username\", username);\n  _data.set(\"password\", pass);\n  // console.log(_user.username +' | '+ _user.password)\n  axios({\n    method: \"post\",\n    url: \"http://localhost/mayvoto/api/actions/admin.login.php\",\n    data: _data,\n    headers: {\n      \"content-type\": \"application/x-www-form-urlencoded\"\n    }\n  })\n    .then(function(response) {\n      //handle success\n      if (!response.data.error) {\n        // console.log(response.data.message)\n        store.dispatch(\"setCurrentUser\", JSON.stringify(response.data.data));\n        cb({\n          authenticated: true,\n          token: Math.random()\n            .toString(36)\n            .substring(7)\n        });\n      } else {\n        // console.log(response.data.message)\n        cb({ authenticated: false });\n      }\n    })\n    .catch(function(response) {\n      //handle error\n      console.log(response);\n      cb({ authenticated: false });\n    });\n}\n\nasync function verifyUser(username, pass, cb) {\n  let _data = new FormData();\n  _data.set(\"username\", username);\n  _data.set(\"password\", pass);\n  // console.log(_user.username +' | '+ _user.password)\n  axios({\n    method: \"post\",\n    url: \"http://localhost/mayvoto/api/actions/user.login.php\",\n    data: _data,\n    headers: {\n      \"content-type\": \"application/x-www-form-urlencoded\"\n    }\n  })\n    .then(function(response) {\n      //handle success\n      if (!response.data.error) {\n        // console.log(response.data.message)\n        store.dispatch(\"setCurrentUser\", JSON.stringify(response.data.data));\n        cb({\n          authenticated: true,\n          token: Math.random()\n            .toString(36)\n            .substring(7)\n        });\n      } else {\n        // console.log(response.data.message)\n        cb({ authenticated: false });\n      }\n    })\n    .catch(function(response) {\n      //handle error\n      console.log(response);\n      cb({ authenticated: false });\n    });\n}\n"]}]}